<!DOCTYPE html>
<html lang='en'>
  <head>
    <meta charset='utf-8'>
    <title>What food is worse?</title>
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <meta name='author' content='hackzurich2014'>
    <link rel='stylesheet' type='text/css' href='//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css'>
  </head>

  <body style='padding-top: 70px;'> <!-- TODO: put in css file -->
    <div class='main' style='max-width:1200px;'> <!-- TODO: put in css file -->

      <nav class='navbar navbar-default navbar-fixed-top' role='navigation'>
        <div class='container-fluid'>
          <!-- Brand and toggle get grouped for better mobile display -->
          <div class='navbar-header'>
            <button type='button' class='navbar-toggle collapsed' data-toggle='collapse' data-target='#main-nav'>
              <span class='sr-only'>Toggle navigation</span>
              <span class='icon-bar'></span>
              <span class='icon-bar'></span>
              <span class='icon-bar'></span>
            </button>

            <a class='navbar-brand' href='#'>What food is worse?</a>
          </div> <!-- /.navbar-header -->

          <!-- Collect the nav links, forms, and other content for toggling -->
          <div class='collapse navbar-collapse' id='main-nav'>
            <ul class='nav navbar-nav'>
              <li><a href='/'>Home</a></li>
              <li><a href='#'>Link</a></li>
            </ul>


            <% if username.nil? %>
              <!-- Login -->
              <form class='collapse navbar-form navbar-right login' action='login' method='post'> <!-- TODO: Add action -->
                <div class='form-group'>
                  <input type='text' class='form-control' name='username' placeholder='Username'>
                </div>
                <div class='form-group'>
                  <input type='password' class='form-control' name='password' placeholder='Password'>
                </div>
                <button type='submit' class='btn btn-primary'>Login</button>
                <button type='reset' class='btn btn-default reset'>Cancel</button>
              </form>

              <!-- Register -->
              <form class='collapse navbar-form navbar-right register' action='register' method='post'> <!-- TODO: Add action -->
                <div class='form-group'>
                  <input type='text' class='form-control' name='username' placeholder='Username'>
                </div>
                <div class='form-group'>
                  <input type='password' class='form-control' name='password' placeholder='Password'>
                </div>
                <button type='submit' class='btn btn-primary'>Register</button>
                <button type='reset' class='btn btn-default reset'>Cancel</button>
              </form>

              <ul class='nav navbar-nav navbar-right toggle-forms'>
                <li><a href='#' class='login'>Login</a></li>
                <li><a href='#' class='register'>Register</a></li>
              </ul>

            <% else %>
              <ul class="nav navbar-nav navbar-right">
    		        <li><a href='/logout'>Logout</a></li>
    		      </ul>

            <% end %>
          </div> <!-- /.navbar-collapse -->

        </div> <!-- /.container-fluid -->
      </nav> <!-- /.navbar -->

      <div class='container-fluid'>
        <%= yield %>
      </div>

    </div> <!-- /.main -->

    <script type='text/javascript' src='//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js'></script>
    <script type='text/javascript' src='//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js'></script>

    <!-- TODO: put in js file -->
    <script>
      $(document).ready(function () {
        // auto active
        $('a[href="' + this.location.pathname + '"]').parent().addClass('active');

        // show login
        $('.toggle-forms a.login').click(function(event) {
          event.preventDefault();
          $(this).parents('.toggle-forms').hide();
          $('.navbar-form.login').show();
        });
        $('.navbar-form.login .reset').click(function(event) {
          $(this).parents('.navbar-form').hide();
          $('#main-nav .toggle-forms').show();
        });

        // show register
        $('.toggle-forms a.register').click(function(event) {
          event.preventDefault();
          $(this).parents('.toggle-forms').hide();
          $('.navbar-form.register').show();
        });
        $('.navbar-form.register .reset').click(function(event) {
          $(this).parents('.navbar-form').hide();
          $('#main-nav .toggle-forms').show();
        });
      });
    </script>
  </body>
</html>
